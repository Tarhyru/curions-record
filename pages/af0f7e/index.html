<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>编码 | 好奇与记录</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/curious-record/img/header32.png">
    <script 0="[object Object]"></script>
    <meta name="description" content="前进，前进！">
    <meta name="keywords" content="笔记，记录，与思考">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/curious-record/assets/css/0.styles.04cbb9da.css" as="style"><link rel="preload" href="/curious-record/assets/js/app.1b433ccd.js" as="script"><link rel="preload" href="/curious-record/assets/js/2.4e50ea2e.js" as="script"><link rel="preload" href="/curious-record/assets/js/30.adc16f7d.js" as="script"><link rel="prefetch" href="/curious-record/assets/js/10.d8e1f993.js"><link rel="prefetch" href="/curious-record/assets/js/11.e91eed8b.js"><link rel="prefetch" href="/curious-record/assets/js/12.fbec5504.js"><link rel="prefetch" href="/curious-record/assets/js/13.7f5f49ca.js"><link rel="prefetch" href="/curious-record/assets/js/14.d8cea973.js"><link rel="prefetch" href="/curious-record/assets/js/15.0d3a14c1.js"><link rel="prefetch" href="/curious-record/assets/js/16.add1c2c7.js"><link rel="prefetch" href="/curious-record/assets/js/17.53cd1b71.js"><link rel="prefetch" href="/curious-record/assets/js/18.6a9f67ce.js"><link rel="prefetch" href="/curious-record/assets/js/19.acaefe75.js"><link rel="prefetch" href="/curious-record/assets/js/20.3dd65721.js"><link rel="prefetch" href="/curious-record/assets/js/21.90f28a73.js"><link rel="prefetch" href="/curious-record/assets/js/22.5fbfd956.js"><link rel="prefetch" href="/curious-record/assets/js/23.3020142d.js"><link rel="prefetch" href="/curious-record/assets/js/24.722deffe.js"><link rel="prefetch" href="/curious-record/assets/js/25.e06ae87a.js"><link rel="prefetch" href="/curious-record/assets/js/26.a756dd5b.js"><link rel="prefetch" href="/curious-record/assets/js/27.101dea1f.js"><link rel="prefetch" href="/curious-record/assets/js/28.5f07d92e.js"><link rel="prefetch" href="/curious-record/assets/js/29.a05138de.js"><link rel="prefetch" href="/curious-record/assets/js/3.769bffce.js"><link rel="prefetch" href="/curious-record/assets/js/31.4f25332f.js"><link rel="prefetch" href="/curious-record/assets/js/32.3ae68406.js"><link rel="prefetch" href="/curious-record/assets/js/33.2c02dade.js"><link rel="prefetch" href="/curious-record/assets/js/4.336e7394.js"><link rel="prefetch" href="/curious-record/assets/js/5.e9a598bc.js"><link rel="prefetch" href="/curious-record/assets/js/6.70515b7e.js"><link rel="prefetch" href="/curious-record/assets/js/7.c3265736.js"><link rel="prefetch" href="/curious-record/assets/js/8.cdb04354.js"><link rel="prefetch" href="/curious-record/assets/js/9.4bada7ff.js">
    <link rel="stylesheet" href="/curious-record/assets/css/0.styles.04cbb9da.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open no-sidebar have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/curious-record/" class="home-link router-link-active"><img src="/curious-record/img/head.png" alt="好奇与记录" class="logo"> <span class="site-name can-hide">好奇与记录</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/curious-record/" class="nav-link">首页</a></div><div class="nav-item"><a href="/curious-record/archives/" class="nav-link">归档</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/curious-record/" class="nav-link">首页</a></div><div class="nav-item"><a href="/curious-record/archives/" class="nav-link">归档</a></div> <!----></nav>  <!----> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/curious-record/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>阅读杂记</span></li></ul> <div class="info" data-v-06225672><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-06-11</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">编码<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="起因"><a href="#起因" class="header-anchor">#</a> 起因</h1> <p>字符串压缩库: <a href="https://pieroxy.net/blog/pages/lz-string/index.html" target="_blank" rel="noopener noreferrer">https://pieroxy.net/blog/pages/lz-string/index.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>
针对 localStorage 只能存 5mb 设计，大多数情况下有效压缩字符串，<br>
不过会牺牲可读性(输出结果是基于 UTF-16 的一个变种 的而大多数情况下浏览器展示的是 UTF-8)。</p> <p>基本模式的输入输出只兼容 webkit 内核的浏览器<br>
可以输出标准 UTF-16。（相对原版稍微大一点，兼容主流浏览器）
也可以输出 base64（牺牲压缩率，原理上也许会变得更大）
或者输出 Unit8Array</p> <p>于是开始对 UTF-8，UTF-16 的区别，以及它们对应的 16 进制数据产生了兴趣</p> <h1 id="相关知识"><a href="#相关知识" class="header-anchor">#</a> 相关知识</h1> <h2 id="关于文字编码-一段字符串-实际保存的是编码信息-然后展示终端根据配置的编码类型查找对应的信息展示"><a href="#关于文字编码-一段字符串-实际保存的是编码信息-然后展示终端根据配置的编码类型查找对应的信息展示" class="header-anchor">#</a> 关于文字编码: 一段字符串，实际保存的是编码信息，然后展示终端根据配置的编码类型查找对应的信息展示</h2> <p>编码（encode） = 符号变成 01
解码（decode） = 01 变成符号</p> <p>UTF-8: 常见编码形式包含大多数常见语言中的场景文字，互联网中比较通用，使用 1 ～ 4 个字节来编码</p> <ul><li>兼容 ASCII</li> <li>不定长</li></ul> <p>UTF-16: 能表示更多字符</p> <ul><li>不兼容 ASCII</li> <li>定长 2 字节</li></ul> <p>具体的区别:<a href="https://blog.lunawen.com/posts/20201210-luna-tech-utf-16/" target="_blank" rel="noopener noreferrer">https://blog.lunawen.com/posts/20201210-luna-tech-utf-16/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>UTF-16LE(little-endian): 小端，小端就是将高位的字节放在高地址表示。
UTF-16BE(big-endian): 大端，大端就是将高位的字节放在低地址表示。
UTF-16:FE FF 表示大端，FF FE 表示小端。</p> <p>关于 Byte Order Mark(字节序):
简单来说，<br>
大端是顺序的，比较符合人类的阅读思维。
小端是倒序的，在机器内处理效率可能更高。
一般来说，写不需要考虑顺序，读需要。</p> <p><a href="https://www.ruanyifeng.com/blog/2016/11/byte-order.html" target="_blank" rel="noopener noreferrer">https://www.ruanyifeng.com/blog/2016/11/byte-order.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
<a href="https://blog.erratasec.com/2016/11/how-to-teach-endian.html#.YhRVGZNBzAM" target="_blank" rel="noopener noreferrer">https://blog.erratasec.com/2016/11/how-to-teach-endian.html#.YhRVGZNBzAM<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="base64-是一种基于-64-个可打印的字符来标识二进制数据的标识方法。"><a href="#base64-是一种基于-64-个可打印的字符来标识二进制数据的标识方法。" class="header-anchor">#</a> base64: 是一种基于 64 个可打印的字符来标识二进制数据的标识方法。</h2> <p>简单来说，先将内容变为 01 再用 64 个可以打印出来的字符表示出来。</p> <p>前提：</p> <ol><li>1 个 byte 有 8bit</li> <li>Base64 一共有 64 个可用字符，2 的 6 次方等于 64，所以每个字符对应 6 bit。</li> <li>计算 6 和 8 的最小公倍数（质因数分解法）</li></ol> <p>原理:
求 8bit 与 6bit 的公倍数，将 8bit 转换为 6bit 再用字母标识出来，除不尽补 0
64 个字符,a~z[26],A~Z[26],0-9[10],剩下两个字符通常是'+','/',末尾使用'='作为后缀。</p> <p><img src="https://raw.githubusercontent.com/lunawen/public-images/master/20201117-luna-tech-base64-encoding/3.png" alt="图解"></p> <h2 id="unicode-统一码-5-层字符编码模型"><a href="#unicode-统一码-5-层字符编码模型" class="header-anchor">#</a> Unicode(统一码) - 5 层字符编码模型</h2> <ol><li><p>Abstract Character Repertoire（简称 ACR，抽象字符表）：字符表定义了所有的字符，字符表可以是封闭的也可以是开放的；
封闭的就是定死了所有的字符，不能再加新的（比如 ASCII）；
开放的就是可以加新的进去（比如 Unicode）；</p></li> <li><p>Coded Character Set（简称 CCS，编码字符集）：这是一个 function，用来把字符映射成 code point（码位）；
可以理解成一个 dictionary，输入字符，输出码位；
比如大写 A 就对应码位 65；</p></li> <li><p>Character Encoding Form（简称 CEF，字符编码表）：用来把码位映射成码元（code units），如 2 Byte，4 Byte；
假如系统是 16 位（2 Byte）的，我们只能映射 2^16 种不同的字符，那么超出这个范围的码位就必须用多个 16 位（比如 4 Byte）来表示；</p></li> <li><p>Character Encoding Scheme（简称 CES，字符编码方案）：用来把 CEF 输出的码元变成最终的 Byte，然后就可以传输了，这个步骤决定字符的储存方式~
UTF-8, UTF-16, UTF-32… 这些都是 CES；
大部分的系统都用 UTF-8 或者 UTF-16BE 作为 Unicode 的编码格式；
CES 还分为 simple CES, compound CES, compressing CES。</p></li> <li><p>Transfer Encoding Syntax / Higher Level Protocol（简称 TES，传输编码语法/高层机制）：比如指明编码标准（utf-8 还是 utf-16），当单一符号在不同地区有变体的情况下，也可以用 XML 的语言标签（xml:lang) 或 HTML 的语言标签（lang=“en-US”）来为 unicode 提供一些额外的信息。</p></li></ol> <p>注：有时候你会看到 Character Map（简称 CM，字符映射）这个术语，它可以被看做 CCS，CEF，CES 这三个层级的统称，也就是从字符直接转为 Byte 的过程。</p> <p>Unicode 中的 plane（平面）
使用两个 2 个 hex 标识的 Unicode 空间，共有 17 个，不同的 plane 里标识不同类型的字符
比如：0 plane 常用字符集在这里
深入则涉及到 Unicode 的编码，参考这里
<a href="https://blog.lunawen.com/posts/20201129-luna-tech-unicode-plane/" target="_blank" rel="noopener noreferrer">https://blog.lunawen.com/posts/20201129-luna-tech-unicode-plane/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/12/25, 6:12:00</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <!----></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2023
    <span>MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/curious-record/assets/js/app.1b433ccd.js" defer></script><script src="/curious-record/assets/js/2.4e50ea2e.js" defer></script><script src="/curious-record/assets/js/30.adc16f7d.js" defer></script>
  </body>
</html>
