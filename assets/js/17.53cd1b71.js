(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{333:function(t,e,r){"use strict";r.r(e);var a=r(7),n=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"p-站-api-现状"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#p-站-api-现状"}},[t._v("#")]),t._v(" p 站 api 现状")]),t._v(" "),e("p",[t._v("当前 p 站无法通过移动端 api 登陆，web 端也添加了各种认证，直接使用获取到的 token 去传递将是最简便的办法")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://gist.github.com/ZipFile/c9ebedb224406f4f11845ab700124362",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gist.github.com/ZipFile/c9ebedb224406f4f11845ab700124362"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/eggplants/get-pixivpy-token",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/eggplants/get-pixivpy-token"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/Floaterest/pixiv.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/Floaterest/pixiv.ts"),e("OutboundLink")],1)]),t._v(" "),e("h1",{attrs:{id:"如果想写个小的收集工具-需要如下几部分"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如果想写个小的收集工具-需要如下几部分"}},[t._v("#")]),t._v(" 如果想写个小的收集工具，需要如下几部分")]),t._v(" "),e("p",[t._v("登陆获取 Token 的部分（docker 外挂，解析文本返回，服务 1）")]),t._v(" "),e("p",[t._v("移动端 api 调用的服务（拆分请求部分，与实际调用 api 的部分，依赖服务 1 保证自身的可用性，服务 2）")]),t._v(" "),e("p",[t._v("具体的业务 （依赖服务 2）")]),t._v(" "),e("p",[t._v("介于这个复杂度不高，写在同一个服务中")]),t._v(" "),e("h1",{attrs:{id:"实际使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实际使用"}},[t._v("#")]),t._v(" 实际使用")]),t._v(" "),e("p",[t._v("Api 是移动端的\n使用两个 Token 一个 refresh 一个 access\n获取的方式基本是通过无头浏览器去取，问题在于有谷歌的人机验证\n简单的搞就是先用浏览器通过验证再通过无头模式获取，看看这个能不能拆分或者简单化一些")]),t._v(" "),e("h1",{attrs:{id:"计划"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#计划"}},[t._v("#")]),t._v(" 计划")]),t._v(" "),e("p",[t._v("还是基于 koa ts 尽量复用以前的工程结构，登陆和刷新 token 从 Api 中拆出来，其他 Api 用到哪个拆哪个\n榜单，搜索，主要先这两个\n模块注意拆分和隔离\n使用 ORM\n表设计区分开，考虑清除")]),t._v(" "),e("h2",{attrs:{id:"_1-0-0"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-0-0"}},[t._v("#")]),t._v(" 1.0.0")]),t._v(" "),e("ol",[e("li",[t._v("每日拉取榜单保存")]),t._v(" "),e("li",[t._v("展示界面。\n2.1 榜单展示"),e("br"),t._v("\n2.1.1 爬取中返回稍等，支持不缓存直接展示"),e("br"),t._v("\n2.1.2 自己提供图片反代"),e("br"),t._v("\n2.1.3 支持按 tag 过滤，聚合去重展示"),e("br"),t._v("\n2.2 Token 设置的部分\n2.3 可控制什么时候爬取哪几类"),e("br"),t._v("\n2.3.1 调度列表，可以创建爬取历史的")])])])}),[],!1,null,null,null);e.default=n.exports}}]);